<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1">
		<title></title>
		<style type="text/css">
			*{margin: 0;padding: 0;}
			body{overflow: auto;}
			.container{width: 100%;background: #aaa;overflow:auto;position: relative;left: 0;top: 0;}
			.wrap{width: 100%;height: auto;}
			#div1{background: blueviolet;}
			#div2{background: green;height: 100px;}
			#div3{position: relative;left: 0;top: 0;background: purple;display: none;overflow: auto;}
			.load{height: 100px;display: none;}
			.img-wrap{height: 1280px;}
			header{display: block;width: 100%;height: 100px;background: #fff;text-align: center;line-height: 100px;position:fixed;left:0;top:0;}
		</style>
	</head>
	<body>
		<div class="all">
			<div class="container">
			<div class="wrap">
			
				<div id="div1">
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
					<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
				</div>
				<div id="div2">
					上拉查看详情
				</div>
			</div>
		</div>
		<div class="load">下拉返回</div>
		<div id="div3">
			<div class="img-wrap">
				<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
				<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
				<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
				<p>akjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfdakjna济南日股哈尔鬼案件垃圾卡尔管阀件看健康减肥vfd</p>
		
			</div>
		</div>
		
	</div>
		
		<script src="/积分商城页面/lib/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				$('.container,.all,#div3').css({
					width:'100%',
					height:screen.height+'px'
				});
				if($('.container').scrollTop()>0){
	alert(1)
}
				var flag=0,flag2=0,h1,h2,h3,h4;
				$('.container').scroll(function(){
					console.log($('.wrap').height(),$('.container').scrollTop(),screen.height,$('.container')[0].scrollHeight,$('body').scrollTop(),$('#div3').scrollHeight)
					
					h1=$('.wrap').height();
					h2=$('.container').scrollTop();
					h3=screen.height;
					h4=$('.container')[0].scrollHeight;
					if(h2>=(h1-h3)){
//						alert(1)
						$(document).scrollTop(0);
						$('.container').animate({
							top:-h3+'px'
						},3000);
						$('#div3').css('display','block').animate({
							top:-h3+'px'
						},3000,function(){
							$(document).scrollTop(0);
						});
					}
					
					
				});
				$('#div3').scroll(function(){
					
					var top=$('#div3').scrollTop();
					console.log(top)
					if(top<=0){
//						alert(0);
	//					$('.load').slideUp(500)
	//			   		$('.load').css('display','none');
						$('.container').animate({
							top:0+'px'
						},1000);
						$('#div3').animate({
							top:0+'px'
						},1000,function(){
							$(this).css('display','none');
							$(document).scrollTop(h3);
							
						});
					}
				});
				banner();
				function banner () {
					var drag = document.querySelector('body');
				    var startY=0;
				    var moveY=0;
				    var distance=0;
				    //绑定触屏事件
				    drag.addEventListener('touchstart',function(e){
				        //记录触屏开始的数据
				        startY= e.targetTouches[0].clientY;
				    })
				    drag.addEventListener('touchmove',function(e){
				        //记录触屏开始的数据
				        moveY= e.targetTouches[0].clientY;
				        distance = moveY-startY;
				    })
				    //绑定触屏结束事件
					drag.addEventListener('touchend',function(e){
				        if(distance<0&&h4>(h1+50)){
							$(document).scrollTop(0);
							$('.container').animate({
								top:-h3+'px'
							},3000);
							$('#div3').css('display','block').animate({
								top:-h3+'px'
							},3000,function(){
								$(document).scrollTop(0);
						});
					   }else if(distance>0&&h4>(h1+50)){
					   	
					   		$('.container').animate({
								top:0+'px'
							},1000);
							$('#div3').animate({
								top:0+'px'
							},1000,function(){
								$(this).css('display','none');
								$(document).scrollTop(h3);
								
							});
					    }
					    //数据重置
				        startY=0;
				        moveY=0;
				        distance=0;
					});
				}
				
				

					
			});
		</script>	
	</body>
</html>
